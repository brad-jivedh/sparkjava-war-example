pipeline {
agent {label 'docker'}
stages {
  stage ("Checkout stage") {
    steps {
      git branch: 'master' , url: 'https://github.com/brad-jivedh/sparkjava-war-example.git'
    }
}
stage ("Docker image build stage") {
   steps {
     script {
         echo "Building the docker image"
         sh "docker build -t image_1:${BUILD_NUMBER} ."
     }
   }
}
stage ("Building the container in Docker server") {
  steps {
    sh "docker run -d -p 90:80 image_1:${BUILD_NUMBER}"
  }
}
}
}
